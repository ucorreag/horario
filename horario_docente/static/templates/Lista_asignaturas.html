{% extends 'base.html'%}
{% block content %}
 <div class="panel panel-default">
   <nav class="navbar navbar-inverse theme_border">
        <div class="form-horizontal" >
               <h4 class="text-center" style="color: #f6faff">
                                         Lista de Asignaturas
                
                 </h4>
         </div>
    </nav>
	           
	<div style="padding-left:20px;padding-right:20px;">						
		
		
		<h3>{{carrera.nombre}}</h3> 
		
		    
			<table class="table" >
				<tr class="active"><th colspan="4">
				
				
				<div class="btn-group col-lg-1">
					<a href="#" onclick="return false;" class=" btn dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
					<span class="glyphicon glyphicon-th-list"  aria-hidden="true" ></span>
					</a>
					<ul class="dropdown-menu">
						{%for año in carrerasaños%}
						<li class="disabled" style="background:#866000">
							<a href="#" onclick="return false;" class="">{{año.id_año.nombre}} año</a>
							
								<li class="dropdown-item"><a href="{%url 'lista_asignaturas' carrera.id año.id_año.id 'primero'%}">Primer Semestre</a></li>
								<li class="dropdown-item"><a href="{%url 'lista_asignaturas' carrera.id año.id_año.id 'segundo'%}">Segundo Semestre</a></li>
							
						</li>	
						{% endfor %}
					</ul>
					</div>
					<h4 class="col-lg-3">Año:{{año.nombre}}</h4><h4 class="col-lg-3">Semestre:{{semestre.nombre}}</h4>
					<h4 class="col-lg-2"><a href="{% url 'horario' semestre.id %}"  name="" id="horario"><span class="glyphicon glyphicon-list-alt" title="horario"></span></a></h4>
					
									
					<a data-toggle="modal" href="#" onclick="return false;" data-target="#nuevaAsignatura" class="btn glyphicon glyphicon-plus col-lg-3"> Añadir Asignatura</a>
					</th>
					
					
					</tr>
					<tr><th>Nombre de Asignatura</th><th>Profesor</th><th>Horas totales</th><th>Acciones</th></tr>
						<form method="get">{% csrf_token%}
							{% for asignatura in asignaturas%}
							<tr>
							<td >
								{{asignatura.nombre}}					
						
							</td>
							<td>
								<a href="{% url 'usuario' asignatura.id_profesor.id%}">{{asignatura.id_profesor.first_name}} {{asignatura.id_profesor.last_name}}</a>
							</td>
							<td>{{asignatura.horas}}</td>
							<td >
								
							    <a href="#" onclick="return false;" name="{% url 'eliminar_asignatura' asignatura.id %}" id="eliminar"><span class="glyphicon glyphicon-trash" title="eliminar"></span></a>
							    <h2 class="hidden">¿Desea Eliminar {{asignatura.nombre}}?</h2>
							</td>
							</tr>
							{%endfor%}
						</form>	
					 
						
					</table>
										
					
				</td></tr>
				
			</table><br><br>	
		
	</div>
	
	
</div>



<!--nueva asignatura-->
<div class="modal fade" id="nuevaAsignatura" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
      
      <div class="modal-dialog modal-lg" >
        <div class="modal-content">
             <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hiden="true">&times;</span></button>
                    <h4 class="modal-title " align="center">Nueva Asignatura</h4>
             </div>
             <form id = "formulario" action= '' method='POST' class=' form-inline botonCentrado'>
                  {% csrf_token %}
				    				  
                    <div id = "contenedor" class="modal-body">
						
						<table class="table">
							<tr>
								<td class="col-lg-6">
								<label for="nombre">Nombre:</label>
								<input type="text" name="nombre" id="nombre" requerid="" class="form-control">
								<label for="horas">Horas totales:</label>
								<input type="number" required=""class="form-control" id="horas" name="horas">
								<label for="profesor">Profesor:</label>
								<select name="profesor" id="profesor" class="form-control">
									{% for profesor in profes %}
									<option value="{{profesor.id}}">{{profesor.first_name}} {{profesor.last_name}}</option>						  
									{% endfor %}
								</select>
					  	</td>
					  <td class="col-lg-6">
						  <label for="carrera">Carrera:</label>
						  <input id="carrera" type="text"value="{{carrera.nombre}}" readonly class="form-control"/>
						  <label for="anho">Año:</label>
						  <input id="anho"type="text"value="{{año.nombre}}" readonly class="form-control"/>
						  <label for="semestre">Semestre:</label>
						  <input type="text"value="{{semestre.nombre}}" id="semestre" readonly class="form-control"/>
					  </td>
					  <tr>
						  
					</table>
					</div>
                    <div class="modal-footer">
                        
				  
                  <input type='submit' class='btn btn-default'  value='Guardar'>
                  <input type='button'  class='btn btn-default' value='Cancelar' data-dismiss='modal'>
                
               </div>
               </form>
               
       </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div><!-- /.modal -->


 <div class="modal fade" id="myeliminar" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
      
      <div class="modal-dialog" role="document">
        <div class="modal-content">
             <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hiden="true">&times;</span></button>
                    <h4 class="modal-title " >Eliminar</h4>
             </div>
             <div id = "contenedor" class="modal-body">
               <h4 id="texto" style = "text-align: center" ></h4>
             </div>
             <div class="modal-footer">
                <form id = "fo" action= '' method='POST' class=' form-inline botonCentrado'>
                  {% csrf_token %}
                  <input type='submit' class='btn btn-danger'  value='Eliminar' class='btn btn-primary'>
				  
                  <input type='button'  class='btn btn-default' value='Cancelar' data-dismiss='modal'>
                </form>
               </div>
               
       </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div><!-- /.modal -->




{% block extra_js %}
<script>
         jQuery(function($){
             $('a#eliminar').click(function(){
               var $texto= $(this).next().text();
               $('#texto').text($texto);
               $('#fo').attr('action',$(this).attr('name'));
               $('#myeliminar').modal('show');
               
             });
             
         });
         
     </script>
 
 {% endblock%}


{% endblock %}

